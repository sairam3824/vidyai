# ─────────────────────────────────────────────────────────────────────────────
# Vidyai Backend — Environment Variables
# Copy to .env and fill in real values.
# NEVER commit .env to version control.
# ─────────────────────────────────────────────────────────────────────────────

# ── App ───────────────────────────────────────────────────────────────────────
APP_NAME=Vidyai
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=production
API_V1_PREFIX=/api/v1

# ── Supabase (Database + Auth) ────────────────────────────────────────────────
# All from: Supabase Dashboard → Project Settings → API
#
# DATABASE_URL  → Settings → Database → Connection string → Transaction (port 6543)
# SUPABASE_URL  → Settings → API → Project URL
# SUPABASE_ANON_KEY        → Settings → API → Project API Keys → anon (publishable)
# SUPABASE_SERVICE_ROLE_KEY → Settings → API → Project API Keys → service_role (secret)
#
# NOTE: JWT is verified via JWKS endpoint (handles ECC P-256 automatically).
# SUPABASE_JWT_SECRET is NOT required unless you explicitly use legacy HS256.
DATABASE_URL=postgresql://postgres.[ref]:[db-password]@aws-0-ap-south-1.pooler.supabase.com:6543/postgres
SUPABASE_URL=https://[ref].supabase.co
SUPABASE_ANON_KEY=sb_publishable_...
SUPABASE_SERVICE_ROLE_KEY=sb_secret_...

# ── OpenAI ────────────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-...
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4o
EMBEDDING_DIMENSIONS=1536
RAG_TOP_K=6

# ── Storage (AWS S3 for PDFs) ─────────────────────────────────────────────────
STORAGE_MODE=s3
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=ap-south-1
S3_BUCKET_NAME=vidyai-pdfs

# ── Redis (cache + Celery broker) ────────────────────────────────────────────
REDIS_URL=redis://redis:6379/0

# ── Usage Limits ──────────────────────────────────────────────────────────────
FREE_TESTS_PER_WEEK=3
BASIC_TESTS_PER_WEEK=20
PREMIUM_TESTS_PER_WEEK=100

# ── Rate Limiting ─────────────────────────────────────────────────────────────
RATE_LIMIT_REQUESTS=200
RATE_LIMIT_WINDOW_SECONDS=3600

# ── CORS ──────────────────────────────────────────────────────────────────────
ALLOWED_ORIGINS=["https://your-app.vercel.app","http://localhost:3000"]
# Optional (helps with Vercel preview URLs): https://<anything>.vercel.app
# ALLOWED_ORIGIN_REGEX=https://.*\\.vercel\\.app
